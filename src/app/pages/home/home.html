<div class="home-container">
  <div class="header">
    <h1 class="title">🎬 Daftar Film</h1>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

  <div class="filter-bar">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="Cari film..."
      class="search-input"
    />

    <select [(ngModel)]="selectedGenre" class="filter-select">
      <option value="">Semua Genre</option>
      <option *ngFor="let g of genres" [value]="g">{{ g }}</option>
    </select>

    <select [(ngModel)]="sortBy" class="filter-select">
      <option value="rating">⭐ Rating Tertinggi</option>
      <option value="year">🆕 Tahun Terbaru</option>
      <option value="title">🔤 Judul (A-Z)</option>
    </select>
  </div>

  <div *ngIf="isLoading" class="loading">⏳ Sedang memuat data film...</div>
  <div *ngIf="errorMsg && !isLoading" class="error">{{ errorMsg }}</div>
  <div *ngIf="!isLoading && !errorMsg && filteredFilms.length > 0; else emptyState">
    <div class="film-grid">
      <div
        class="film-card"
        *ngFor="let film of filteredFilms"
        (click)="goToDetail(film.id)"
      >
        <div class="poster-wrapper">
          <img
            [src]="film.poster || 'assets/no-poster.png'"
            [alt]="film.title"
            class="poster"
            (error)="film.poster = 'assets/no-poster.png'"
          />

          <span
            class="badge"
            [ngClass]="film.published ? 'published' : 'draft'"
          >
            {{ film.published ? '✅ Published' : '❌ Draft' }}
          </span>

          <div class="overlay">
            <h3>{{ film.title }}</h3>
            <p>{{ film.genre }} | {{ film.year }}</p>
            <p>⭐ {{ film.rating }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #emptyState>
    <div class="empty">😢 Belum ada film yang dipublish oleh admin.</div>
  </ng-template>
</div>
